# CMMC Data Pipeline Configuration

# Path to existing training data
cmmc_finetune_path: /home/inigo/Github Projects/cmmc-finetune
training_data_path: /home/inigo/Github Projects/cmmc-finetune/data/merged

# Pipeline data directories
data_dir: data
raw_dir: data/raw
processed_dir: data/processed
staging_dir: data/staging
versions_dir: data/versions

# Unified system prompt (must match training data)
system_prompt: >-
  You are a CMMC and cybersecurity compliance expert with deep knowledge of
  CMMC 2.0, NIST SP 800-171, NIST SP 800-172, NIST CSF, HIPAA Security Rule,
  and related frameworks. You provide accurate, practical guidance on compliance
  requirements, security controls, implementation procedures, and assessment
  preparation. You cite specific standards, controls, and regulatory references.

# Scraper settings
scrapers:
  nist_csrc:
    oscal_catalog_url: https://raw.githubusercontent.com/usnistgov/oscal-content/main/nist.gov/SP800-53/rev5/json/NIST_SP-800-53_rev5_catalog.json
    csv_catalog_url: https://csrc.nist.gov/CSRC/media/Projects/risk-management/800-53%20Downloads/800-53r5/NIST_SP-800-53_rev5_catalog_load.csv
    rate_limit_seconds: 2

  nist_sp800_171:
    oscal_catalog_url: https://raw.githubusercontent.com/usnistgov/oscal-content/main/nist.gov/SP800-171/rev3/json/NIST_SP800-171_rev3_catalog.json
    rate_limit_seconds: 2

  nist_csf:
    oscal_catalog_url: https://raw.githubusercontent.com/usnistgov/oscal-content/main/nist.gov/CSF/v2.0/json/NIST_CSF_v2.0_catalog.json
    rate_limit_seconds: 2

  dod_documents:
    rate_limit_seconds: 3
    # PDF document list is defined in scrapers/dod_documents.py

  federal_register:
    base_url: https://www.federalregister.gov/api/v1
    search_terms:
      - CMMC
      - "Cybersecurity Maturity Model"
      - "DFARS 252.204"
      - "controlled unclassified information"
      - "NIST 800-171"
    agencies:
      - defense-department
      - national-institute-of-standards-and-technology
      - health-and-human-services-department
    rate_limit_seconds: 1

  ecfr:
    base_url: https://www.ecfr.gov/api/versioner/v1
    titles:
      - title: 32
        parts: [170]   # CMMC
      - title: 48
        parts: [252]   # DFARS
      - title: 45
        parts: [164]   # HIPAA Security Rule
    rate_limit_seconds: 1

# Quality filtering
quality:
  min_content_length: 100
  min_answer_length: 200
  max_answer_length: 8000
  max_table_ratio: 0.3
  min_alpha_ratio: 0.3

# Deduplication
dedup:
  minhash_num_perm: 128
  lsh_threshold: 0.8
  shingle_size: 5

# Versioning
versioning:
  max_versions: 20
  auto_backup: true

# Validation thresholds
validation:
  min_new_records: 10
  max_new_records: 5000
  max_duplicate_ratio: 0.5
  min_quality_score: 0.8
  sample_size: 20
